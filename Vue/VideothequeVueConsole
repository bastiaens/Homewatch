package Home.vue;

import java.sql.SQLException;
import java.util.Scanner;

import Home.modele.Oeuvre;
import Home.modele.OeuvreDAO;



/**
 * 	
 * @author Olivier et JL
 *
 */
public class ConsoleVue extends VideoGUI {
	

	    public static void main(String[] args)  {
	    	try
	    	{

		    	AfficherMenu();
	    	}
	    	catch(SQLException e)
	    	{
	    		e.printStackTrace();
	    	}
	    }
	    /**
	     * Constructeur MVC.
	     * @param model
	     * @param vue
	     */
	    public ConsoleVue(Oeuvre model,VideoGUI vue)
	    {
	    	super(model,vue);
	    }

	    public static void AfficherMenu() throws SQLException {
	        Scanner userInput = new Scanner(System.in);
	        String MENU;

	        // Display menu graphics
	        System.out.println("*****************************************");
	        System.out.println("| Modifier la base de donnée"             );
	        System.out.println("*****************************************");
	        System.out.println("| Options:                              |");
	        System.out.println("|        1. Recherche film              |");
	        System.out.println("|        2. Ajouter un film             |");
	        System.out.println("|        3. Mettre à  jour un film      |");
	        System.out.println("|        4. Supprimer un film           |");
	        System.out.println("|        5. Quitter                     |");
	        System.out.println("*****************************************");
	        System.out.print("Choississez une option: ");

	        MENU = userInput.next();

	//display menu based on user selection
	        switch (MENU) {
	            case "1":
				try {
					Scanner userI = new Scanner(System.in);
					OeuvreDAO daor = new OeuvreDAO();
					System.out.println("Vous avez choisi l'option 1: rechercher un film: ");
					String Titre;
					System.out.println("entrez un titre:");
					Titre = userI.next();
					System.out.println(daor.searchOeuvre(Titre));
					ConsoleVue.AfficherMenu();
					
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
	            	break;
	            	
	            case "2":
				try {
					System.out.println("Vous avez choisi l'option 2: Ajout d'un film:");
					Scanner userI = new Scanner(System.in);
					OeuvreDAO daoa = new OeuvreDAO();
	
			        System.out.println("Entrez le titre du Film:");
			        String Titre = userI.next();

			        System.out.println("Entrez son résumer: ");
			        String Description = userI.nextLine();

			        System.out.println("Entrez le nom du réalisateur");
			        String nomRea = userI.next();
			        
			        System.out.println("Entrez le prenom du réalisateur");
			        String prenomRea = userI.next();
					
					System.out.println("entrez le genre:");
					String genre = userI.next();
					
					System.out.println("sa date de parution");
					int date_parution = userI.nextInt();
					
					Oeuvre tempOeuvre = new Oeuvre(Titre,Description, nomRea, prenomRea,genre, date_parution); 
					daoa.addOeuvre(tempOeuvre);
					ConsoleVue.AfficherMenu();
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
	            	break;
	            	
	            case "3":
				try {
					System.out.println("Vous avez choisi l'option 3: Mettre à  jour un film");//ne marche pas
					Scanner userI = new Scanner(System.in);
					OeuvreDAO daoa = new OeuvreDAO();
					
					System.out.println("Entrez l'id du film que vous voulez changer:");
					int idF = userI.nextInt();		// Le titre du film a changer.
					
			        System.out.println("Entrez le nouveau titre du Film:");
			        String nouveauTitre = userI.next();

			        System.out.println("Entrez son résumer: ");
			        String Description = userI.next();

			        System.out.println("Entrez l'id du réalisateur");
			        int idRea = userI.nextInt();
					
					System.out.println("entrez l'id du genre:");
					int idGenre = userI.nextInt();
					
					System.out.println("sa date de parution");
					int date_parution = userI.nextInt();
					
					Oeuvre daob = new Oeuvre(idF, nouveauTitre, Description, idRea, idGenre, date_parution);
					daoa.UpdateOeuvres(daob);
					ConsoleVue.AfficherMenu();
					
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
	            	break;
	            	
	            case "4":
				try {
					System.out.println("Vous avez choissi l'option 5: Supprimer un film");
					Scanner userI = new Scanner(System.in);
					OeuvreDAO daod = new OeuvreDAO();
					
					System.out.println("entrez le titre du film");
					String titre = userI.next();
					daod.deleteOeuvres(titre);
					ConsoleVue.AfficherMenu();
					
				} catch (Exception e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
	            	break;
	            	
	            default:
	                System.out.println("vous avez quitter l'application");
	                break; 
	        }
	    }
	}
